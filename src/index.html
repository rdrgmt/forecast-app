<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forecast App</title>
</head>
<body>
    <div id="map"></div>


    <input class="inp" type="text" list="searchdata">
    <button class="search">Search</button>
    <datalist id="searchdata"></datalist>
    

    <form id="search-form">
        <label for="search-bar">Busca por Cidade: </label>
        <input id="search-bar" type="text" list="search-data" placeholder="ex. São José dos Campos" required />
        <button id="search-button" type="submit">Consultar</button>
        <datalist id="search-data"></datalist>
        <script>
            var searchHistory = (localStorage.searchHistory) ? JSON.parse(localStorage.searchHistory) : [];
            
            document.querySelector("#search-button").addEventListener("click", () => {
                if (document.querySelector("#search-bar").value != "" && !searchHistory.includes(document.querySelector("#search-bar").value)) {
                    searchHistory.push(document.querySelector("#search-bar").value);
                    localStorage.searchHistory = JSON.stringify(searchHistory);
                }  
            });

            document.querySelector("#search-bar").addEventListener("focus", () => {
                var data = document.querySelector("datalist#search-data");
                data.innerHTML = "";
                searchHistory.forEach((search) => {
                    data.innerHTML = "<option>" + data.innerHTML;
                    data.querySelector("option").innerText = search;
                });
            });
        </script>


    </form>

    <div id ="popup" class="ol-popup">
        <div id="popup-content"></div>
    </div>

    <script type="module" src="index.ts"></script>
</body>
</html>